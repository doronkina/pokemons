(this.webpackJsonppokemons=this.webpackJsonppokemons||[]).push([[0],[,,function(e,t,n){e.exports=n.p+"static/media/pokeball.5d396d00.png"},,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/logo.651ebad9.png"},function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(11),i=n.n(c),r=(n(18),n(23)),l=(n(19),n(6)),s=n(1),m={isFetching:!1,limit:10,activePage:null,count:null,pokemons:[],pagePortion:1,setPagePortion:function(e){this.pagePortion=e},types:[],filteredPokemons:[],selectedTypes:[],changeSelectedTypes:function(e){var t=this.selectedTypes.indexOf(e);-1===t?this.selectedTypes.push(e):this.selectedTypes.splice(t,1)},fetchedTypes:[],setFetchedTypes:function(){this.fetchedTypes=Object(l.a)(this.selectedTypes)},activePokemon:null,setActivePokemon:function(e){this.activePokemon=e},get pagesCount(){return this.count/this.limit},get filteredPokemonsCount(){return this.filteredPokemons.length},setLimit:function(e){this.limit=e},clearFilters:function(){this.filteredPokemons=[],this.selectedTypes=[],this.fetchedTypes=[]},getPokemons:function(e){var t=this;this.isFetching=!0,fetch("https://pokeapi.co/api/v2/pokemon?limit=".concat(this.limit,"&offset=").concat((e-1)*this.limit)).then((function(e){return e.json()})).then((function(n){Promise.all(n.results.map((function(e){return fetch(e.url).then((function(e){return e.json()}))}))).then((function(a){Object(s.d)((function(){t.pokemons=a,t.count=n.count,t.activePage=e}))})).finally((function(){Object(s.d)((function(){t.isFetching=!1}))}))}))},getTypes:function(){var e=this;this.isFetching=!0,fetch("https://pokeapi.co/api/v2/type").then((function(e){return e.json()})).then((function(t){Object(s.d)((function(){e.types=t.results}))})).finally((function(){Object(s.d)((function(){e.isFetching=!1}))}))},searchPokemon:function(e){var t=this;this.isFetching=!0,fetch("https://pokeapi.co/api/v2/pokemon/".concat(e)).then((function(e){if(200===e.status)return e.json();throw Error(e.status)})).then((function(e){Object(s.d)((function(){t.pokemons=[e],t.filteredPokemons=[],t.selectedTypes=[],t.fetchedTypes=[],t.count=1,t.activePage=1,t.pagePortion=1}))})).catch((function(t){"404"===t.message&&alert("Not Found ".concat(e))})).finally((function(){Object(s.d)((function(){t.isFetching=!1}))}))},getFilteredPokemons:function(e){var t=this;this.isFetching=!0,Promise.all(e.map((function(e){return fetch("https://pokeapi.co/api/v2/type/".concat(e)).then((function(e){return e.json()}))}))).then((function(e){return e.map((function(e){return e.pokemon.map((function(e){return e.pokemon}))}))})).then((function(e){var n=Object(l.a)(new Map(e.flat().map((function(e){return[e.name,e]}))).values());return Object(s.d)((function(){t.filteredPokemons=n})),n.slice(0,t.limit)})).then((function(e){Promise.all(e.map((function(e){return fetch(e.url).then((function(e){return e.json()}))}))).then((function(e){Object(s.d)((function(){t.pokemons=e,t.count=t.filteredPokemonsCount,t.activePage=1,t.pagePortion=1}))})).finally((function(){Object(s.d)((function(){t.isFetching=!1}))}))}))},setFilteredPokemons:function(e){var t=this;this.isFetching=!0;var n=this.filteredPokemons.slice((e-1)*this.limit,e*this.limit);Promise.all(n.map((function(e){return fetch(e.url).then((function(e){return e.json()}))}))).then((function(n){Object(s.d)((function(){t.pokemons=n,t.activePage=e}))})).finally((function(){Object(s.d)((function(){t.isFetching=!1}))}))}},u=n(12),f=n.n(u),p=n(8),h=n(22),d=function(){var e=Object(a.useContext)(N),t=e.selectedTypes,n=e.changeSelectedTypes,c=e.fetchedTypes,i=e.setFetchedTypes,r=Object(a.useState)(!1),s=Object(p.a)(r,2),m=s[0],u=s[1],f=function(){e.getPokemons(),e.clearFilters()},d=function(){if(t.length!==c.length)return!0;for(var e=t.slice().sort(),n=c.slice().sort(),a=0;a<t.length;a++)if(e[a]!==n[a])return!0;return!1};return Object(h.a)((function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){u(!m)}},"Filters"),o.a.createElement("div",{className:m?"filters__open":"filters"},o.a.createElement("form",{onSubmit:function(n){!function(n){t.length&&(e.getFilteredPokemons(t),u(!m),i(Object(l.a)(t))),n.preventDefault()}(n)}},o.a.createElement("h4",null,"Pokemons Types"),o.a.createElement("div",{className:"filter__container"},e.types.map((function(e){return o.a.createElement("label",{key:e.name},o.a.createElement("input",{type:"checkbox",name:"type",value:e.name,checked:-1!==t.indexOf(e.name),onChange:function(){n(e.name)}}),e.name)}))),o.a.createElement("div",{className:"filter__btns"},o.a.createElement("button",{type:"submit",disabled:!t.length||!d()},"Apply"),o.a.createElement("button",{onClick:f,disabled:!c.length},"Clear")))))}))},v=function(){var e=Object(a.useContext)(N);return Object(h.a)((function(){return o.a.createElement("form",{className:"limitForm"},o.a.createElement("select",{value:e.limit,onChange:function(t){!function(t){e.setLimit(t.target.value),e.filteredPokemonsCount?e.setFilteredPokemons(1):e.getPokemons(1),e.setPagePortion(1)}(t)}},o.a.createElement("option",{value:10},"10"),o.a.createElement("option",{value:20},"20"),o.a.createElement("option",{value:50},"50")))}))},g=function(){var e=Object(a.useContext)(N),t=Object(a.useState)(""),n=Object(p.a)(t,2),c=n[0],i=n[1];return o.a.createElement("form",{className:"searchForm",onSubmit:function(t){c.length&&e.searchPokemon(c),t.preventDefault()}},o.a.createElement("input",{type:"search",value:c,onChange:function(e){i(e.target.value)}}),o.a.createElement("button",{type:"submit"},"Search"))},k=function(){var e=Object(a.useContext)(N);return Object(a.useEffect)((function(){e.getTypes()})),o.a.createElement(o.a.Fragment,null,o.a.createElement(d,null),o.a.createElement(v,null),o.a.createElement(g,null))},E=function(){var e=Object(a.useContext)(N);return o.a.createElement("header",{className:"main-header"},o.a.createElement("div",{className:"main-header__container"},o.a.createElement("div",{className:"main-header__logo"},o.a.createElement("img",{src:f.a,alt:"logo",onClick:function(){e.setLimit(10),e.getPokemons(1),e.clearFilters()}})),o.a.createElement(k,null)))},P=n(2),b=n.n(P),y=function(e){var t=e.pokemon,n=Object(a.useContext)(N);return o.a.createElement("div",{className:"pokemon-card",onClick:function(){n.setActivePokemon(t)}},o.a.createElement("div",{className:"pokemon-card__header"},o.a.createElement("h4",null,t.name)),o.a.createElement("div",{className:"pokemon-card__img"},o.a.createElement("img",{src:t.sprites.front_default||b.a,alt:t.name})),o.a.createElement("p",{className:"pokemon-card__footer"},t.types.map((function(e){return o.a.createElement("span",{key:e.type.name},e.type.name)}))))},j=function(){var e=Object(a.useContext)(N),t=function(t){var n=[];if(e.pagesCount)for(var a=7*(t-1),c=7*t<e.pagesCount?7*t:e.pagesCount,i=function(t){n.push(o.a.createElement("button",{key:t,onClick:function(){var n;n=t+1,e.filteredPokemonsCount?e.setFilteredPokemons(n):e.getPokemons(n)},disabled:t+1===e.activePage},t+1))},r=a;r<c;r++)i(r);return n};return Object(h.a)((function(){return o.a.createElement("div",{className:"pokemons"},o.a.createElement("div",{className:"pokemons__container"},e.pokemons.map((function(e){return o.a.createElement(y,{key:e.name,pokemon:e})}))),o.a.createElement("div",{className:"pagination"},o.a.createElement("div",{className:"pagination__container"},o.a.createElement("button",{onClick:function(){e.setPagePortion(e.pagePortion-1)},disabled:1===e.pagePortion},"..."),o.a.createElement("div",{className:"pagination__pages"},t(e.pagePortion)),o.a.createElement("button",{onClick:function(){e.setPagePortion(e.pagePortion+1)},disabled:e.pagePortion===Math.ceil(e.pagesCount/7)},"..."))))}))},O=function(){var e=Object(a.useContext)(N);return Object(a.useEffect)((function(){e.getPokemons(1)})),o.a.createElement(j,null)},_=function(e){var t=e.title,n=e.value;return o.a.createElement("div",{className:"row"},o.a.createElement("p",{className:"left"},t),o.a.createElement("p",{className:"right"},Array.isArray(n)?n.join(", "):n))},C=function(){var e=Object(a.useContext)(N);return Object(h.a)((function(){return o.a.createElement(o.a.Fragment,null,e.activePokemon&&o.a.createElement("div",{className:"pokemon"},o.a.createElement("div",{className:"pokemon__container"},o.a.createElement("div",{className:"pokemon__header"},o.a.createElement("h4",null,e.activePokemon.name),o.a.createElement("button",{className:"close",onClick:function(){e.setActivePokemon(null)}})),o.a.createElement("div",{className:"pokemon__main"},o.a.createElement("div",{className:"pokemon-card__img"},o.a.createElement("img",{src:e.activePokemon.sprites.front_default||b.a,alt:e.activePokemon.name})),o.a.createElement("div",{className:"pokemon__info"},o.a.createElement(_,{title:"weight",value:e.activePokemon.weight}),o.a.createElement(_,{title:"height",value:e.activePokemon.height}),o.a.createElement(_,{title:"forms",value:e.activePokemon.forms.map((function(e){return e.name}))}),o.a.createElement(_,{title:"types",value:e.activePokemon.types.map((function(e){return e.type.name}))}),o.a.createElement(_,{title:"abilities",value:e.activePokemon.abilities.map((function(e){return e.ability.name}))}),o.a.createElement(_,{title:"held items",value:e.activePokemon.held_items.map((function(e){return e.item.name}))}),o.a.createElement(_,{title:"base experience",value:e.activePokemon.base_experience}),o.a.createElement(_,{title:"moves",value:e.activePokemon.moves.map((function(e){return e.move.name}))}))))))}))},F=function(){var e=Object(a.useContext)(N);return Object(h.a)((function(){return o.a.createElement(o.a.Fragment,null,e.isFetching&&o.a.createElement("div",{className:"preloader"},o.a.createElement("div",{className:"preloader__img"},o.a.createElement("img",{src:b.a,alt:"pokeball"}))))}))},N=Object(a.createContext)(),T=function(e){var t=e.children,n=Object(r.a)((function(){return m}));return o.a.createElement(N.Provider,{value:n},t)},x=function(){return o.a.createElement(T,null,o.a.createElement(E,null),o.a.createElement(O,null),o.a.createElement(C,null),o.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.78ef8d35.chunk.js.map